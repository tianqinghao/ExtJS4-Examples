<HTML>
 <HEAD>
  <TITLE>使用模板成员函数</TITLE>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../ext-4.0/resources/css/ext-all.css" />
  <script type="text/javascript" src="../../ext-4.0/bootstrap.js"></script>
  <script type="text/javascript" src="../../ext-4.0/locale/ext-lang-zh_CN.js"></script>
  <script type="text/javascript">
	Ext.onReady(function(){
		//定义模板，在模板中使用模板成员函数
		var tpl = new Ext.XTemplate(
			'<table border=1 cellpadding=0 cellspacing = 0 class=title>',
			'<tr><td width=90 >姓名</td><td width=90 >工资</td></tr>',
			'<tpl for=".">',
			'<tpl if="this.check(wage)">',
			'<tr><td>{name}</td>',
			'<td>{[this.format(values.wage)]}</td>',
			'</tpl></tpl>',
			'</table>',
			{
				//定义模板成员函数
				check : function(wage) {
					if(wage > 1000){
						return true;
					}else {
						return false
					}
				},
				//定义模板成员函数
				format : function(wage) {
					if(wage > 1300){
						return '<font color=red>'+wage+'</font>';
					}else {
						return '<font color=blue>'+wage+'</font>';
					}
					
				}
			}
		);
		//定义模板数据，per表示发薪比例，wage表示标准工资
		var tplData = [
				{name : '张三',wage : 1000},
				{name : '李四',wage : 1200},
				{name : '王五',wage : 900},
				{name : '赵六',wage : 1500}
			]
		//模板值和模板进行组合并将新生成的节点插入到id为'tpl-table'的元素中
		tpl.append('tpl-table',tplData);
	});
  </script>
 </HEAD>
 <BODY STYLE="margin: 10px">
	<div id='tpl-table'/>
 </BODY>
</HTML>
